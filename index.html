<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>539 å°ˆæ¥­åˆ†æç”¢ç”Ÿå™¨</title>
    <style>
        :root {
            --primary-color: #e63946;
            --secondary-color: #457b9d;
            --bg-color: #f8f9fa;
            --text-dark: #1d3557;
        }

        body { font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; background: var(--bg-color); color: var(--text-dark); }

        /* ç½®é ‚é¢æ¿å„ªåŒ– */
        .header-panel {
            background: #ffffff;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .upload-btn-wrapper { position: relative; overflow: hidden; display: inline-block; }
        .btn-upload { border: 2px solid var(--secondary-color); color: var(--secondary-color); background-color: white; padding: 8px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; }
        input[type=file] { position: absolute; left: 0; top: 0; opacity: 0; cursor: pointer; }

        /* åˆ†å¸ƒåœ–é¢æ¿å„ªåŒ– */
        .chart-section { padding: 20px; max-width: 1200px; margin: auto; }
        .card { background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); overflow: hidden; margin-bottom: 20px; }
        .card-header { background: var(--text-dark); color: white; padding: 12px 20px; font-size: 0.9rem; font-weight: bold; }

        .table-container { overflow-x: auto; }
        table { border-collapse: collapse; width: 100%; font-size: 13px; }
        th, td { border: 1px solid #edf2f7; padding: 8px 4px; text-align: center; }
        th { background: #f1f5f9; color: #64748b; font-weight: 600; }
        .date-cell { font-weight: bold; color: var(--secondary-color); background: #f8fafc; min-width: 90px; }

        /* ä¸­çåœ“é»æ¨£å¼ */
        .hit-dot {
            background: var(--primary-color);
            color: white;
            width: 24px;
            height: 24px;
            line-height: 24px;
            display: inline-block;
            border-radius: 50%;
            font-size: 11px;
            box-shadow: 0 2px 4px rgba(230, 57, 70, 0.3);
        }

        /* ç”¢ç”Ÿå™¨æŒ‰éˆ•å€ */
        .generator-box { text-align: center; padding: 30px; }
        .gen-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 40px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            box-shadow: 0 4px 15px rgba(230, 57, 70, 0.4);
        }
        .gen-btn:hover { background: #c1121f; transform: translateY(-2px); }
        .gen-btn:active { transform: translateY(0); }

        .balls-display { margin-top: 25px; display: flex; gap: 12px; justify-content: center; }
        .ball {
            width: 50px; height: 50px; line-height: 50px; background: #ffca3a; 
            border-radius: 50%; font-weight: bold; font-size: 1.3rem;
            border: 3px solid #f9a620; text-shadow: 1px 1px 0 rgba(255,255,255,0.5);
        }
    </style>
</head>
<body>

<div class="header-panel">
    <div style="font-weight: bold; color: var(--primary-color); font-size: 1.2rem;">539 æ•¸æ“šå¤§å¸«</div>
    <div class="upload-btn-wrapper">
        <button class="btn-upload">ä¸Šå‚³ CSV æ­·å²è³‡æ–™</button>
        <input type="file" id="csvFile" accept=".csv" onchange="handleFile()">
    </div>
</div>

<div class="chart-section">
    <div class="card">
        <div class="card-header">ğŸ“Š è¿‘ 10 æœŸé€£è™Ÿåˆ†å¸ƒè¶¨å‹¢ (æœ€æ–°æ—¥æœŸåœ¨ä¸Š)</div>
        <div class="table-container" id="chartOutput">
            <p style="padding: 40px; text-align: center; color: #94a3b8;">è«‹ä¸Šå‚³ CSV æª”æ¡ˆä»¥åˆ†ææ•¸æ“š</p>
        </div>
    </div>

    <div class="generator-box">
        <button class="gen-btn" onclick="generateNumbers()">éš¨æ©Ÿç”¢ç”Ÿä¸€çµ„</button>
        <div class="balls-display" id="result"></div>
    </div>
</div>

<script>
    function handleFile() {
        const fileInput = document.getElementById('csvFile');
        const file = fileInput.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function(e) {
            // è§£æ CSV ä¸¦ç§»é™¤ç©ºç™½åˆ—
            let rows = e.target.result.split('\n')
                .map(row => row.trim())
                .filter(row => row !== '');

            // å–å¾—æœ€å¾Œ 10 ç­†ä¸¦ç¿»è½‰é †åºï¼ˆè®“æœ€æ–°çš„åœ¨ä¸Šé¢ï¼‰
            const last10 = rows.slice(-10).reverse();
            renderTable(last10);
        };
        reader.readAsText(file);
    }

    function renderTable(dataRows) {
        let tableHtml = `<table><thead><tr><th class="date-cell">æ—¥æœŸ</th>`;
        for (let i = 1; i <= 39; i++) tableHtml += `<th>${i}</th>`;
        tableHtml += `</tr></thead><tbody>`;

        dataRows.forEach(row => {
            const cols = row.split(',');
            const date = cols[0];
            const luckyNums = cols.slice(1).map(n => parseInt(n));

            tableHtml += `<tr><td class="date-cell">${date}</td>`;
            for (let i = 1; i <= 39; i++) {
                if (luckyNums.includes(i)) {
                    tableHtml += `<td><span class="hit-dot">${i}</span></td>`;
                } else {
                    tableHtml += `<td></td>`;
                }
            }
            tableHtml += `</tr>`;
        });

        tableHtml += `</tbody></table>`;
        document.getElementById('chartOutput').innerHTML = tableHtml;
    }

    function generateNumbers() {
        const nums = [];
        while(nums.length < 5) {
            const r = Math.floor(Math.random() * 39) + 1;
            if(!nums.includes(r)) nums.push(r);
        }
        nums.sort((a, b) => a - b);
        
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = nums.map(n => `
            <div class="ball">${n < 10 ? '0'+n : n}</div>
        `).join('');
    }
</script>

</body>
</html>
